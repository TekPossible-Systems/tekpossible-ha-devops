name: RHEL9Setup
description: Complete Custom Setup of RHEL 9
schemaVersion: 1.0

phases:
  - name: build
    steps:
      - name: RHEL9Setup
        action: ExecuteBash
        inputs:
          commands:
            - dnf update -y
            - dnf install -y ansible-core unzip git python3-pip
            - pip3 install git-remote-codecommit
            - mkdir /staging
            - cd /staging/git-repo
            - git clone codecommit::<<AWS_REGION>>://<<IMAGE_REPO_NAME>>
            - cd <<IMAGE_REPO_NAME>>
            - bash ./setup_image.sh